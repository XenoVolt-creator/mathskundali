<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mathskundali</title>
  <link rel="stylesheet" href="style.css"/>
  <!-- ‚úÖ Fixed Nepali date converter script path -->
<script src="https://cdn.jsdelivr.net/npm/nepali-date-library@1.1.3/dist/nepali-date-library.umd.js"></script>

  <style>
    body {
      background: linear-gradient(to bottom, #0f0f1c, #1a1a2f);
      color: #dbe9f4;
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
    }
    .card, .neon-box {
      background: #1f1f2b;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 0 12px #61dafb33;
      margin-bottom: 20px;
    }
    .neon-box input, .dob-calc input {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      border-radius: 6px;
      border: none;
      background: #2b2b3a;
      color: #fff;
    }
    .neon-btn, .copy-btn {
      padding: 10px 20px;
      background: #61dafb;
      border: none;
      border-radius: 6px;
      color: #000;
      cursor: pointer;
      margin-top: 15px;
    }
    .copy-btn {
      margin-left: 10px;
      background-color: #4fb3d4;
    }
    .neon-btn:hover, .copy-btn:hover {
      background: #4fb3d4;
    }
    .dob-output {
      background: #242438;
      padding: 15px;
      border-radius: 10px;
      margin-top: 20px;
      box-shadow: 0 0 8px #61dafb55;
    }
    .dob-output h3 {
      color: #61dafb;
    }
  </style>
</head>
<body>
  <div id="loader">
    <img src="logo.png" alt="Mathskundali Logo" class="loader-logo" />
    <p class="loader-text">
      Note: This website has the explanation of all the tricks that we performed in the math exhibition. You can also play the games and see how we did it during the exhibition.
    </p>
    <div class="loading-bar">
      <div class="loading-progress"></div>
    </div>
  </div>

  <header>
    <nav>
      <h1 class="logo">Mathskundali</h1>
      <ul class="nav-links">
        <li><a href="#" onclick="navigate('home')">Home</a></li>
        <li><a href="#" onclick="navigate('tricks')">Magic Tricks</a></li>
        <li><a href="#" onclick="navigate('explanations')">Explanations</a></li>
        <li><a href="#" onclick="navigate('about')">About Us</a></li>
      </ul>
    </nav>
  </header>

  <main id="main-content"></main>

  <footer>
    <p>&copy; 2025 Mathskundali. All rights reserved.</p>
  </footer>

  <script>
    const mainContent = document.getElementById('main-content');

    function navigate(view) {
      if (view === 'home' || view === 'tricks') {
        mainContent.innerHTML = `
          <section class="hero">
            <h2>Unlocking the Magic of Numbers</h2>
            <p>Welcome to Mathskundali, where we blend mathematical prediction with magic!</p>
            <div class="category-buttons">
              <button onclick="showTrickCategory('simple')">Simple Tricks</button>
              <button onclick="showTrickCategory('hard')">Hard Tricks</button>
              <button onclick="showTrickCategory('complex')">Complex Tricks</button>
            </div>
          </section>
        `;
      } else if (view === 'about') {
        mainContent.innerHTML = `
          <section class="about">
            <h2>About Us</h2>
            <p>We‚Äôre a group of students passionate about the mystical beauty of math. Mathskundali is our attempt to bring prediction and fun together through numbers. Our team ‚Äî <strong>Bisaj Khadka</strong>, <strong>Yubaraj Yadav</strong>, and <strong>Samuel Aryal</strong> ‚Äî created <strong>Mathskundali</strong> to show how math can surprise, predict, and entertain!</p>
          </section>
        `;
      } else if (view === 'explanations') {
        mainContent.innerHTML = `
          <section class="explanations">
            <h2>Explanations</h2>
            <ul>
              <li><strong>Simple Tricks:</strong> Always 5, Age Prediction, Birthday Day</li>
              <li><strong>Hard Tricks:</strong> Height Trick, Phone Number Reveal</li>
              <li><strong>Complex Tricks:</strong> I Know Your DOB, Zeller's Formula, ISO Week</li>
            </ul>
          </section>
        `;
      }
    }

    function showTrickCategory(type) {
      const categories = {
        simple: { title: "Simple Tricks", tricks: [ { id: 1, name: "The Number is Always 5" }, { id: 2, name: "Magic Age Trick" }, { id: 3, name: "Birthday Final Number" } ] },
        hard: { title: "Hard Tricks", tricks: [ { id: 4, name: "Phone Number Reveal" }, { id: 5, name: "Predict Your Height" }, { id: 6, name: "Birthday Number Pattern" } ] },
        complex: { title: "Complex Tricks", tricks: [ { id: 7, name: "üîÆ The Number That Reveals Your DOB" }, { id: 8, name: "Zeller‚Äôs Formula" }, { id: 9, name: "ISO Week Number" } ] }
      };
      const selected = categories[type];
      const trickCards = selected.tricks.map(trick => `
        <div class="card">
          <strong>${trick.name}</strong><br>
          <button onclick="showTrick(${trick.id})">Play the Trick</button>
        </div>
      `).join('');
      mainContent.innerHTML = `
        <section class="tricks">
          <h2>${selected.title}</h2>
          <div class="tricks-grid">${trickCards}</div>
          <button onclick="navigate('home')" class="back-btn">‚Üê Back to Categories</button>
        </section>
      `;
    }

    function showTrick(id) {
      if (id === 7) {
        mainContent.innerHTML = `
          <section class="trick-details">
            <h2 style="color:#61dafb">üîÆ The Number That Reveals Your Date of Birth</h2>
            <div class="card">
              <h3>üßÆ Steps:</h3>
              <ol>
                <li>Multiply your <strong>day</strong> by 10000</li>
                <li>Add your <strong>month</strong> √ó 100</li>
                <li>Then add the last two digits of your <strong>year</strong></li>
                <li>Multiply the number by <strong>7919</strong></li>
                <li>Divide the final number by <strong>100</strong></li>
              </ol>
              <p style="color:#aaa;">Don't want to do this manually? Use the calculator below üëá</p>
            </div>
    <div class="card dob-calc">
  <h3>üßÆ Manual Calculator</h3>
  <input type="text" id="manual-display" readonly placeholder="0" />

  <div class="calc-buttons">
    <button onclick="pressKey('7')">7</button>
    <button onclick="pressKey('8')">8</button>
    <button onclick="pressKey('9')">9</button>
    <button onclick="pressKey('/')">/</button>

    <button onclick="pressKey('4')">4</button>
    <button onclick="pressKey('5')">5</button>
    <button onclick="pressKey('6')">6</button>
    <button onclick="pressKey('*')">*</button>

    <button onclick="pressKey('1')">1</button>
    <button onclick="pressKey('2')">2</button>
    <button onclick="pressKey('3')">3</button>
    <button onclick="pressKey('-')">-</button>

    <button onclick="pressKey('0')">0</button>
    <button onclick="pressKey('.')">.</button>
    <button onclick="pressKey('+')">+</button>
    <button onclick="pressKey('(')">(</button>

    <button onclick="pressKey(')')">)</button>
    <button onclick="clearManual()">C</button>
    <button onclick="deleteManual()">DEL</button>
    <button onclick="calculateManual()">=</button>

    <button onclick="copyManualResult()">Copy</button>
  </div>
</div>

<style>
  .calc-buttons {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
    margin-top: 15px;
  }
  .calc-buttons button {
    padding: 12px;
    font-size: 1rem;
    background-color: #2b2b3a;
    color: #fff;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.2s;
  }
  .calc-buttons button:hover {
    background-color: #3c3c4f;
  }
  #manual-display {
    width: 100%;
    font-size: 1.2rem;
    padding: 10px;
    background-color: #1c1c2b;
    color: #fff;
    border: none;
    border-radius: 6px;
    margin-bottom: 10px;
    text-align: right;
  }
</style>

</div>


            <div class="neon-box">
              <h3>üîì Paste the Final Number Below</h3>
              <input type="number" id="magic-dob-number" placeholder="Enter final number here..." />
              <button class="neon-btn" onclick="decodeDOB()">Reveal My Date of Birth</button>
              <div id="dob-reveal" class="dob-output"></div>
              <div id="dob-breakdown" style="margin-top: 1rem; color:#ccc;"></div>
            </div>
            <button onclick="showTrickCategory('complex')" class="back-btn">‚Üê Back to Tricks</button>
          </section>`;
      }
         else if (id === 8) {
        // Trick 2: Zeller's Formula
        mainContent.innerHTML = `
          <section class="trick-details">
            <h2 style="color:#61dafb">Zeller‚Äôs Formula - Day of the Week Calculator</h2>
            <p>Enter your birth date in BS (Bikram Sambat) to convert to AD and find the day of the week:</p>
            <div class="card dob-calc">
              <label>BS Year:</label>
              <input type="number" id="bs-year" placeholder="2079" />
              <label>BS Month:</label>
              <input type="number" id="bs-month" placeholder="1-12" />
              <label>BS Day:</label>
              <input type="number" id="bs-day" placeholder="1-32" />
              <button class="neon-btn" id="convert-bs-to-ad">Convert BS to AD</button>
            </div>
            <div class="card dob-calc" style="margin-top:20px;">
              <label>AD Year:</label>
              <input type="number" id="ad-year" placeholder="2023" />
              <label>AD Month:</label>
              <input type="number" id="ad-month" placeholder="1-12" />
              <label>AD Day:</label>
              <input type="number" id="ad-day" placeholder="1-31" />
              <button class="neon-btn" id="calculate-day">Calculate Day of Week</button>
            </div>
            <div id="zellers-result" class="dob-output" style="margin-top:20px; font-weight:bold; font-size:1.2em;"></div>
            <button onclick="showTrickCategory('complex')" class="back-btn" style="margin-top:30px;">‚Üê Back to Tricks</button>
          </section>
        `;

        setTimeout(() => {
          document.getElementById('convert-bs-to-ad').addEventListener('click', () => {
            const bsY = +document.getElementById('bs-year').value;
            const bsM = +document.getElementById('bs-month').value;
            const bsD = +document.getElementById('bs-day').value;

          try {
  const adDate = window.NepaliDateLibrary.BStoAD(`${bsY}-${bsM}-${bsD}`);
  document.getElementById('ad-year').value = adDate.year;
  document.getElementById('ad-month').value = adDate.month;
  document.getElementById('ad-day').value = adDate.date;
  document.getElementById('zellers-result').textContent =
    `Converted AD Date: ${adDate.year}-${adDate.month}-${adDate.date}`;
} catch (e) {
  alert("Invalid BS date. Please enter a valid one.");
}

          });

          document.getElementById('calculate-day').addEventListener('click', () => {
            const y = +document.getElementById('ad-year').value;
            let m = +document.getElementById('ad-month').value;
            const d = +document.getElementById('ad-day').value;

            if (m < 3) {
              m += 12;
              y--;
            }

            const K = y % 100;
            const J = Math.floor(y / 100);
            const h = (d + Math.floor(13 * (m + 1) / 5) + K + Math.floor(K / 4) + Math.floor(J / 4) + (5 * J)) % 7;
            const days = ["Saturday", "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday"];

            document.getElementById('zellers-result').textContent = `Day of the week: ${days[h]}`;
          });
        }, 50);
      }

      else {
        mainContent.innerHTML = `<section class="trick-details"><h2>Coming Soon</h2><p>This trick is under development.</p></section>`;
      }
    }

    function calculateMagicNumber() {
      const day = +document.getElementById("calc-day").value;
      const month = +document.getElementById("calc-month").value;
      const year = +document.getElementById("calc-year").value;
      const shortYear = year % 100;

      if (isNaN(day) || isNaN(month) || isNaN(year)) {
        document.getElementById("calculated-output").innerText = "Please enter valid numbers.";
        return;
      }

      const base = (day * 10000) + (month * 100) + shortYear;
      const final = (base * 7919) / 100;
      document.getElementById("calculated-output").innerHTML = `Final Number: <strong id="final-num">${final}</strong>`;
    }

    function copyFinalNumber() {
      const el = document.getElementById("final-num");
      if (el) navigator.clipboard.writeText(el.textContent);
    }

    function decodeDOB() {
      const input = Number(document.getElementById("magic-dob-number").value);
      const output = document.getElementById("dob-reveal");
      const breakdown = document.getElementById("dob-breakdown");

      if (!input || input < 1000000) {
        output.innerHTML = `<p>Please enter a valid number (usually over 1 million).</p>`;
        breakdown.innerHTML = "";
        return;
      }

      const semi = (input * 100) / 7919;
      const year = Math.floor(semi % 100);
      const month = Math.floor((semi / 100) % 100);
      const day = Math.floor(semi / 10000);

      output.innerHTML = `<h3>üéâ Your Date of Birth: <strong>${day}/${month}/${year}</strong></h3>`;
    }

    document.addEventListener("DOMContentLoaded", () => {
      const loader = document.getElementById("loader");
      if (loader) {
        setTimeout(() => {
          loader.style.display = "none";
          navigate('home');
        }, 3000);
      } else {
        navigate('home');
      }
    });
  
  let manualExpression = '';

  function pressKey(val) {
    manualExpression += val;
    document.getElementById('manual-display').value = manualExpression;
  }

  function calculateManual() {
    try {
      const result = eval(manualExpression);
      document.getElementById('manual-display').value = result;
      manualExpression = result.toString();
    } catch (e) {
      document.getElementById('manual-display').value = "Error";
      manualExpression = '';
    }
  }

  function deleteManual() {
    manualExpression = manualExpression.slice(0, -1);
    document.getElementById('manual-display').value = manualExpression;
  }

  function clearManual() {
    manualExpression = '';
    document.getElementById('manual-display').value = '';
  }

  function copyManualResult() {
    const result = document.getElementById('manual-display').value;
    if (result && result !== "Error") {
      navigator.clipboard.writeText(result);
    }
  }

  </script>
</body>
</html>
